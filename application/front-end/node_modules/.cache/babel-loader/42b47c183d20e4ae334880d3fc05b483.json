{"ast":null,"code":"import _classCallCheck from \"C:\\\\Users\\\\jonju\\\\Documents\\\\csc667-su19-Team07\\\\application\\\\front-end\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\Users\\\\jonju\\\\Documents\\\\csc667-su19-Team07\\\\application\\\\front-end\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"C:\\\\Users\\\\jonju\\\\Documents\\\\csc667-su19-Team07\\\\application\\\\front-end\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"C:\\\\Users\\\\jonju\\\\Documents\\\\csc667-su19-Team07\\\\application\\\\front-end\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _assertThisInitialized from \"C:\\\\Users\\\\jonju\\\\Documents\\\\csc667-su19-Team07\\\\application\\\\front-end\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"C:\\\\Users\\\\jonju\\\\Documents\\\\csc667-su19-Team07\\\\application\\\\front-end\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"C:\\\\Users\\\\jonju\\\\Documents\\\\csc667-su19-Team07\\\\application\\\\front-end\\\\src\\\\components\\\\board.js\";\nimport Chessboard from \"chessboardjsx\";\nimport React, { Component } from \"react\";\nimport Chess from \"chess.js\";\nimport { retrieveCookie } from \"./cookies\";\nimport io from \"socket.io-client\";\nimport GameControls from \"./gameControls\";\n\nvar Board =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Board, _Component);\n\n  function Board(props) {\n    var _this;\n\n    _classCallCheck(this, Board);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Board).call(this, props));\n    _this.state = {\n      game: new Chess()\n    };\n\n    _this.calcWidth = function (_ref) {\n      var screenWidth = _ref.screenWidth,\n          screenHeight = _ref.screenHeight;\n\n      if (!(screenWidth / 1.8 > 940)) {\n        return screenWidth / 1.8;\n      } else {\n        return 940;\n      }\n    };\n\n    _this.allowDrag = function (_ref2) {\n      var piece = _ref2.piece,\n          sourceSquare = _ref2.sourceSquare;\n\n      if (_this.state.game.turn() === \"w\" && _this.state.game.header().White === retrieveCookie() || _this.state.game.turn() === \"b\" && _this.state.game.header().Black === retrieveCookie()) {\n        if (piece[0] === _this.state.game.turn()) {\n          return true;\n        }\n      } else {\n        return false;\n      }\n    };\n\n    _this.onDrop = function (_ref3) {\n      var sourceSquare = _ref3.sourceSquare,\n          targetSquare = _ref3.targetSquare;\n\n      _this.state.game.header(\"White\", _this.props.hostplayerid);\n\n      _this.state.game.header(\"Black\", _this.props.playerid);\n\n      var move = _this.state.game.move({\n        from: sourceSquare,\n        to: targetSquare\n      }); //if move is valid\n\n\n      if (move == null) return;\n\n      if (_this.state.game.pgn() !== null) {\n        _this.updateState(_this.state.game.pgn());\n      }\n\n      _this.setState(function (_ref4) {\n        var history = _ref4.history,\n            pieceSquare = _ref4.pieceSquare;\n        return {\n          fen: _this.state.game.fen(),\n          history: _this.state.game.history()\n        };\n      });\n    };\n\n    _this.state = {\n      orientation: \"black\",\n      game: new Chess(),\n      socket: io.connect( //.\"http://ec2-13-58-209-86.us-east-2.compute.amazonaws.com:8080/game/\" +\n      \"http://localhost:8080/game/\" + _this.props.url)\n    };\n    _this.updateState = _this.updateState.bind(_assertThisInitialized(_this));\n    _this.stateReceiver = _this.stateReceiver.bind(_assertThisInitialized(_this));\n    _this.receiveState = _this.receiveState.bind(_assertThisInitialized(_this));\n    return _this;\n  }\n\n  _createClass(Board, [{\n    key: \"updateState\",\n    value: function updateState(gameState) {\n      this.state.socket.emit(\"subscribeToState\", gameState);\n    }\n  }, {\n    key: \"stateReceiver\",\n    value: function stateReceiver(receieveState) {\n      this.state.socket.on(\"state\", receieveState);\n    }\n  }, {\n    key: \"receiveState\",\n    value: function receiveState(state) {\n      var newChess = Chess();\n      newChess.load_pgn(state);\n      this.setState({\n        game: newChess\n      }, function () {\n        return console.log();\n      });\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      this.stateReceiver(this.receiveState);\n      var orientation = \"\";\n      fetch(\"/game/\" + this.props.gamesessionid).then(function (response) {\n        return response.json();\n      }).then(function (res) {\n        var newChess = Chess();\n\n        if (res.pgn != null) {\n          newChess.load_pgn(res.pgn);\n        }\n\n        newChess.header(\"White\", res.HostUserid);\n        newChess.header(\"Black\", res.PlayerUserid);\n\n        if (res.HostUserid === retrieveCookie()) {\n          orientation = \"white\";\n        } else {\n          orientation = \"black\";\n        }\n\n        _this2.setState({\n          game: newChess,\n          orientation: orientation\n        }, function () {\n          return _this2.updateState(_this2.state.game.pgn());\n        });\n      });\n      this.setState(function (_ref5) {\n        var history = _ref5.history,\n            pieceSquare = _ref5.pieceSquare;\n        return {\n          fen: _this2.state.game.fen(),\n          history: _this2.state.game.history()\n        };\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return this.props.children({\n        position: this.state.game.fen(),\n        calcWidth: this.calcWidth,\n        onDrop: this.onDrop,\n        orientation: this.state.orientation,\n        allowDrag: this.allowDrag,\n        turn: this.state.game.turn()\n      });\n    }\n  }]);\n\n  return Board;\n}(Component);\n\nvar ChessBoard =\n/*#__PURE__*/\nfunction (_Component2) {\n  _inherits(ChessBoard, _Component2);\n\n  function ChessBoard() {\n    _classCallCheck(this, ChessBoard);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(ChessBoard).apply(this, arguments));\n  }\n\n  _createClass(ChessBoard, [{\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      var playerCode = 0;\n\n      if (this.props.hostplayerid === retrieveCookie()) {\n        playerCode = 1;\n      }\n\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 146\n        },\n        __self: this\n      }, React.createElement(Board, {\n        gamesessionid: this.props.gameid,\n        url: this.props.gameid,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 147\n        },\n        __self: this\n      }, function (_ref6) {\n        var position = _ref6.position,\n            calcWidth = _ref6.calcWidth,\n            onDrop = _ref6.onDrop,\n            orientation = _ref6.orientation,\n            allowDrag = _ref6.allowDrag,\n            turn = _ref6.turn;\n        return React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 149\n          },\n          __self: this\n        }, React.createElement(GameControls, {\n          turn: turn,\n          gameid: _this3.props.gameid,\n          winner: 0,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 150\n          },\n          __self: this\n        }), React.createElement(Chessboard, {\n          id: \"standard\",\n          orientation: orientation,\n          position: position,\n          calcWidth: calcWidth,\n          onDrop: onDrop,\n          allowDrag: allowDrag,\n          boardStyle: {\n            margin: \"auto\",\n            borderRadius: \"5px\",\n            boxShadow: \"0 5px 15px rgba(0, 0, 0, 0.5)\"\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 151\n          },\n          __self: this\n        }));\n      }));\n    }\n  }]);\n\n  return ChessBoard;\n}(Component);\n\nexport { ChessBoard as default };","map":{"version":3,"sources":["C:\\Users\\jonju\\Documents\\csc667-su19-Team07\\application\\front-end\\src\\components\\board.js"],"names":["Chessboard","React","Component","Chess","retrieveCookie","io","GameControls","Board","props","state","game","calcWidth","screenWidth","screenHeight","allowDrag","piece","sourceSquare","turn","header","White","Black","onDrop","targetSquare","hostplayerid","playerid","move","from","to","pgn","updateState","setState","history","pieceSquare","fen","orientation","socket","connect","url","bind","stateReceiver","receiveState","gameState","emit","receieveState","on","newChess","load_pgn","console","log","fetch","gamesessionid","then","response","json","res","HostUserid","PlayerUserid","children","position","ChessBoard","playerCode","gameid","margin","borderRadius","boxShadow"],"mappings":"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","sourcesContent":["import Chessboard from \"chessboardjsx\";\r\nimport React, { Component } from \"react\";\r\nimport Chess from \"chess.js\";\r\nimport { retrieveCookie } from \"./cookies\";\r\n\r\nimport io from \"socket.io-client\";\r\nimport GameControls from \"./gameControls\";\r\n\r\nclass Board extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      orientation: \"black\",\r\n      game: new Chess(),\r\n      socket: io.connect(\r\n        //.\"http://ec2-13-58-209-86.us-east-2.compute.amazonaws.com:8080/game/\" +\r\n        \"http://localhost:8080/game/\" + this.props.url\r\n      )\r\n    };\r\n    this.updateState = this.updateState.bind(this);\r\n    this.stateReceiver = this.stateReceiver.bind(this);\r\n    this.receiveState = this.receiveState.bind(this);\r\n  }\r\n\r\n  state = {\r\n    game: new Chess()\r\n  };\r\n\r\n  updateState(gameState) {\r\n    this.state.socket.emit(\"subscribeToState\", gameState);\r\n  }\r\n\r\n  stateReceiver(receieveState) {\r\n    this.state.socket.on(\"state\", receieveState);\r\n  }\r\n\r\n  receiveState(state) {\r\n    var newChess = Chess();\r\n    newChess.load_pgn(state);\r\n\r\n    this.setState(\r\n      {\r\n        game: newChess\r\n      },\r\n      () => console.log()\r\n    );\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.stateReceiver(this.receiveState);\r\n    var orientation = \"\";\r\n\r\n    fetch(\"/game/\" + this.props.gamesessionid)\r\n      .then(response => response.json())\r\n      .then(res => {\r\n        var newChess = Chess();\r\n        if (res.pgn != null) {\r\n          newChess.load_pgn(res.pgn);\r\n        }\r\n        newChess.header(\"White\", res.HostUserid);\r\n        newChess.header(\"Black\", res.PlayerUserid);\r\n        if (res.HostUserid === retrieveCookie()) {\r\n          orientation = \"white\";\r\n        } else {\r\n          orientation = \"black\";\r\n        }\r\n\r\n        this.setState(\r\n          {\r\n            game: newChess,\r\n            orientation: orientation\r\n          },\r\n          () => this.updateState(this.state.game.pgn())\r\n        );\r\n      });\r\n\r\n    this.setState(({ history, pieceSquare }) => ({\r\n      fen: this.state.game.fen(),\r\n      history: this.state.game.history()\r\n    }));\r\n  }\r\n\r\n  calcWidth = ({ screenWidth, screenHeight }) => {\r\n    if (!(screenWidth / 1.8 > 940)) {\r\n      return screenWidth / 1.8;\r\n    } else {\r\n      return 940;\r\n    }\r\n  };\r\n\r\n  allowDrag = ({ piece, sourceSquare }) => {\r\n    if (\r\n      (this.state.game.turn() === \"w\" &&\r\n        this.state.game.header().White === retrieveCookie()) ||\r\n      (this.state.game.turn() === \"b\" &&\r\n        this.state.game.header().Black === retrieveCookie())\r\n    ) {\r\n      if (piece[0] === this.state.game.turn()) {\r\n        return true;\r\n      }\r\n    } else {\r\n      return false;\r\n    }\r\n  };\r\n\r\n  onDrop = ({ sourceSquare, targetSquare }) => {\r\n    this.state.game.header(\"White\", this.props.hostplayerid);\r\n    this.state.game.header(\"Black\", this.props.playerid);\r\n\r\n    let move = this.state.game.move({\r\n      from: sourceSquare,\r\n      to: targetSquare\r\n    });\r\n\r\n    //if move is valid\r\n    if (move == null) return;\r\n\r\n    if (this.state.game.pgn() !== null) {\r\n      this.updateState(this.state.game.pgn());\r\n    }\r\n    this.setState(({ history, pieceSquare }) => ({\r\n      fen: this.state.game.fen(),\r\n      history: this.state.game.history()\r\n    }));\r\n  };\r\n\r\n  render() {\r\n    return this.props.children({\r\n      position: this.state.game.fen(),\r\n      calcWidth: this.calcWidth,\r\n      onDrop: this.onDrop,\r\n      orientation: this.state.orientation,\r\n      allowDrag: this.allowDrag,\r\n      turn: this.state.game.turn()\r\n    });\r\n  }\r\n}\r\n\r\nexport default class ChessBoard extends Component {\r\n  render() {\r\n    var playerCode = 0;\r\n    if (this.props.hostplayerid === retrieveCookie()) {\r\n      playerCode = 1;\r\n    }\r\n    return (\r\n      <div>\r\n        <Board gamesessionid={this.props.gameid} url={this.props.gameid}>\r\n          {({ position, calcWidth, onDrop, orientation, allowDrag, turn }) => (\r\n            <div>\r\n              <GameControls turn={turn} gameid={this.props.gameid} winner={0} />\r\n              <Chessboard\r\n                id=\"standard\"\r\n                orientation={orientation}\r\n                position={position}\r\n                calcWidth={calcWidth}\r\n                onDrop={onDrop}\r\n                allowDrag={allowDrag}\r\n                boardStyle={{\r\n                  margin: \"auto\",\r\n                  borderRadius: \"5px\",\r\n                  boxShadow: \"0 5px 15px rgba(0, 0, 0, 0.5)\"\r\n                }}\r\n              />\r\n            </div>\r\n          )}\r\n        </Board>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}